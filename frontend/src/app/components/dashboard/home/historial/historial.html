<section class="card historial-container">
    <div class="table-responsive">
        <table class="tabla-citas">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Nombre</th>
                    <th>MÃ©dico</th>
                    <th>Estado</th>
                    <th>Detalles</th>
                </tr>
            </thead>
            <tbody>
            @if (!isLoading()) {
              @if (appointments.length > 0) {
                @for (app of appointments; track app.id) {
                  <tr>
                      <td>{{ app.appointment_date.getFullYear() }}-{{ app.appointment_date.getMonth() }}-{{ app.appointment_date.getDate() }}</td>
                      <td>{{ app.patient_id }}</td>
                      <td>{{ app.doctor_id }}</td>

                      <td>
                        @switch (app.status) {
                            @case (APPOINTMENT_STATUS.CONFIRMED) {
                                  <span class="badge confirmado">Confirmado</span>
                                }
                                @case (APPOINTMENT_STATUS.PENDING) {
                                  <span class="badge pendiente">Pendiente</span>
                                }
                                @case (APPOINTMENT_STATUS.CANCELLED) {
                                  <span class="badge cancelado">Cancelado</span>
                                }
                                @case (APPOINTMENT_STATUS.SCHEDULED) {
                                  <span class="badge pendiente">Programado</span>
                                }
                            }
                      </td>
                      <td>
                        <button class="btn-outline" title="Detalles"
                        (click)=viewDetalles(app.id)>
                          Ver Detalles
                        </button>
                      </td>
                  </tr>
                }

              } @else {
                <p>No hay citas registradas.</p>
              }
            } @else {
              <p>Cargando citas...</p>
              <div class="spinner"></div>
            }
                            </tbody>
        </table>
    </div>
</section>
